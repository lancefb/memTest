<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Memory and Joke Jerker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

    <!-- Adding inline JavaScript to handle the flip card functionality and change the button text -->
    <script>
        function flipCard() {
            // Toggle the flipped class to flip the card
            document.querySelector('.flip-card-inner').classList.toggle('flipped');
            // Call the function to change the button text based on the current state
            changeButtonText();
        }

        function changeButtonText() {
            // Get references to the button and the hidden input holding the state
            let button = document.querySelector('button');
            let state = document.querySelector('#state-holder').value;

            // Change the button text and state based on the current state
            if(state === 'numbers') {
                button.textContent = 'Show First Joke';
                document.querySelector('#state-holder').value = 'joke1';
            } else if(state === 'joke1') {
                button.textContent = 'Show Second Joke';
                document.querySelector('#state-holder').value = 'joke2';
            } else if(state === 'joke2') {
                button.textContent = 'Check Memory';
                document.querySelector('#state-holder').value = 'input';
                // Remove the hidden class to display the input section
                document.querySelector('#input-section').classList.remove('hidden');
            }
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>Welcome to the Memory and Joke Jerker!</h1>
            <h3>Where you can improve your memory while laughing at jokes!</h3>

            <!-- Step by step instructions for the user -->
            <p>
                Step 1: Remember the three numbers displayed on the card.<br>
                Step 2: Click the button to flip the card and enjoy the first joke.<br>
                Step 3: Click the button again to enjoy the second joke.<br>
                Step 4: Click the button again to input the numbers you remember.<br>
                Step 5: Check to see if you remembered correctly!<br>
            </p>
            <p>Ready? Let's get started!</p>
        </div>
        
        <!-- Hidden input to hold the current state, which will be updated by JavaScript -->
        <input type="hidden" id="state-holder" value="{{ state }}" />
        
        <!-- Flip card section -->
        <div class="flip-card">
            <div class="flip-card-inner">
                <!-- Front of the card to display random numbers -->
                <div class="flip-card-front">
                    <p id="front-content">{{ random_numbers|join(', ') }}</p>
                </div>
                <!-- Back of the card to display the joke -->
                <div class="flip-card-back">
                    <p id="back-content">{{ joke }}</p>
                </div>
            </div>
        </div>
        
        <!-- Form section with a button to trigger card flip -->
        <form method="POST" onsubmit="flipCard(); return false;">
            <button type="button" onclick="flipCard()">Next</button>
        </form>
        
        <!-- Hidden input section to be displayed at the last step -->
        <div id="input-section" class="hidden">
            <form method="POST">
                <label for="numbers">Enter the numbers you remember: </label>
                <input type="text" id="numbers" name="numbers" />
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
</body>
</html>
